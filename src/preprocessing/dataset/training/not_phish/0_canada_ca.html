<html class="js backgroundsize borderimage csstransitions fontface svg details progressbar meter mathml cors largeview" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head prefix="og: http://ogp.me/ns#">
        
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
<title>Canada.ca</title>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta name="description" content="The Government of Canada website is a single point of access to all programs, services, departments, ministries and organizations of the Government of Canada.">
<meta name="dcterms.description" content="The Government of Canada website is a single point of access to all programs, services, departments, ministries and organizations of the Government of Canada.">
<meta name="dcterms.creator" content="Service Canada">
<meta name="dcterms.title" content="Canada.ca">
<meta name="dcterms.issued" title="W3CDTF" content="2013-12-13">
<meta name="dcterms.modified" title="W3CDTF" content="2021-05-10">
<meta name="dcterms.subject" content="GV Government and Politics;Government services">
<meta name="dcterms.language" title="ISO639-2" content="eng">
<meta name="robots" content="noindex, follow">
<meta property="dcterms:issued" content="2013-12-13">
<meta property="dcterms:modified" content="2021-05-10">
<meta property="dcterms:title" content="Canada.ca" lang="en">
<meta property="dcterms:creator" content="Government of Canada" lang="en">
<meta property="dcterms:subject" title="gccore" content="GV Government and Politics" lang="en">
<meta property="dcterms:description" content="The Government of Canada website is a single point of access to all programs, services, departments, ministries and organizations of the Government of Canada." lang="en">
<meta property="dcterms:title" content="Canada.ca" lang="fr">
<meta property="dcterms:creator" content="Gouvernment du Canada" lang="fr">
<meta property="dcterms:subject" title="gccore" content="GV Gouvernement et vie politique" lang="fr">
<meta property="dcterms:description" content="Le site Web du gouvernement du Canada fournit un point d'accès complet à tous les programmes, services, départements, ministères et organismes du gouvernement du Canada." lang="fr">

        <link rel="apple-touch-icon" sizes="57x57 72x72 114x114 144x144 150x150" class="wb-favicon" href="/etc/designs/canada/wet-boew/assets/favicon-mobile.png"><link href="/etc/designs/canada/wet-boew/assets/favicon.ico" rel="icon" type="image/x-icon" class="wb-init wb-favicon-inited">
<link rel="stylesheet" href="/etc/designs/canada/wet-boew/css/wet-boew.min.css">

<link rel="stylesheet" href="/etc/designs/canada/wet-boew/css/theme.min.css">
<link rel="stylesheet" href="/etc/designs/canada/wet-boew/css/messages.min.css">

<noscript><link rel="stylesheet" href="/etc/designs/canada/wet-boew/css/noscript.min.css"/></noscript>



<iframe src="javascript:void(0)" title="" style="width: 0px; height: 0px; border: 0px none; display: none;"></iframe><script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/i18n/en.min.js"></script><script src="//assets.adobedtm.com/be5dfd287373/abb618326704/launch-3eac5e076135.min.js"></script><script src="https://assets.adobedtm.com/extensions/EPbde2f7ca14e540399dcc1f8208860b7b/AppMeasurement.min.js" async=""></script><script src="https://assets.adobedtm.com/extensions/EPbde2f7ca14e540399dcc1f8208860b7b/AppMeasurement_Module_ActivityMap.min.js" async=""></script>





    
                              <script>!function(a){var e="https://s.go-mpulse.net/boomerang/",t="addEventListener";if("False"=="True")a.BOOMR_config=a.BOOMR_config||{},a.BOOMR_config.PageParams=a.BOOMR_config.PageParams||{},a.BOOMR_config.PageParams.pci=!0,e="https://s2.go-mpulse.net/boomerang/";if(window.BOOMR_API_key="KBFUZ-C9D7G-RB8SX-GRGEN-HGMC9",function(){function n(e){a.BOOMR_onload=e&&e.timeStamp||(new Date).getTime()}if(!a.BOOMR||!a.BOOMR.version&&!a.BOOMR.snippetExecuted){a.BOOMR=a.BOOMR||{},a.BOOMR.snippetExecuted=!0;var i,_,o,r=document.createElement("iframe");if(a[t])a[t]("load",n,!1);else if(a.attachEvent)a.attachEvent("onload",n);r.src="javascript:void(0)",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="width:0;height:0;border:0;display:none;",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(r,o);try{_=r.contentWindow.document}catch(O){i=document.domain,r.src="javascript:var d=document.open();d.domain='"+i+"';void(0);",_=r.contentWindow.document}_.open()._l=function(){var a=this.createElement("script");if(i)this.domain=i;a.id="boomr-if-as",a.src=e+"KBFUZ-C9D7G-RB8SX-GRGEN-HGMC9",BOOMR_lstart=(new Date).getTime(),this.body.appendChild(a)},_.write("<bo"+'dy onload="document._l();">'),_.close()}}(),"".length>0)if(a&&"performance"in a&&a.performance&&"function"==typeof a.performance.setResourceTimingBufferSize)a.performance.setResourceTimingBufferSize();!function(){if(BOOMR=a.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.AK){var e=""=="true"?1:0,t="",n="js4lsbyx2mlq4yrotesq-f-9080ae225-clientnsv4-s.akamaihd.net",i="false"=="true"?2:1,_={"ak.v":"32","ak.cp":"368225","ak.ai":parseInt("231651",10),"ak.ol":"0","ak.cr":29,"ak.ipv":4,"ak.proto":"h2","ak.rid":"110ea9dc","ak.r":20453,"ak.a2":e,"ak.m":"dscb","ak.n":"essl","ak.bpcip":"76.184.185.0","ak.cport":49871,"ak.gh":"69.174.30.142","ak.quicv":"","ak.tlsv":"tls1.3","ak.0rtt":"","ak.csrc":"-","ak.acc":"","ak.t":"1647221029","ak.ak":"hOBiQwZUYzCg5VSAfCLimQ==4gBeFWcEfaDGdotsnsOcqeIgqTlgITZqNnfThRezsKFuPrOBVFJJUy8UzHyIfPRcjTd6CKoWwzpSqIydelNbMxNxqu+kgJypl1ag/n19Hl1IjAENNI35+2tQTxwt+CYqI4z0BcxkldF5ZO8py2i5ekULnTS3C9HP3hesGQCqoSG+p8DsLB8rwuzaD+60HMcCT+++84TDF1zDwJibLAJKUTz7FflNCsHzlzFsbNScKZbcpk4j87xF/uVMMITGIbc2ME5G+BOAj3oMLfuyOFd4trHh6e/g4ai5lqd/GaA5uDR4k04Kln5KpDLwBl8bPu7I07n3ukl+yaFU2GchqW6abqYtwTu4Vbqcl/J5dI9Yv+HyqxJ0ypWeNHN9NJ9aeEMGo0gf3zIzm87r1Nw4fEWyTx2mQiWkw5pJ+0Q7a0fKEvA=","ak.pv":"639","ak.dpoabenc":"","ak.tf":i};if(""!==t)_["ak.ruds"]=t;var o={i:!1,av:function(e){var t="http.initiator";if(e&&(!e[t]||"spa_hard"===e[t]))_["ak.feo"]=void 0!==a.aFeoApplied?1:0,BOOMR.addVar(_)},rv:function(){var a=["ak.bpcip","ak.cport","ak.cr","ak.csrc","ak.gh","ak.ipv","ak.m","ak.n","ak.ol","ak.proto","ak.quicv","ak.tlsv","ak.0rtt","ak.r","ak.acc","ak.t","ak.tf"];BOOMR.removeVar(a)}};BOOMR.plugins.AK={akVars:_,akDNSPreFetchDomain:n,init:function(){if(!o.i){var a=BOOMR.subscribe;a("before_beacon",o.av,null,null),a("onbeacon",o.rv,null,null),o.i=!0}return this},is_complete:function(){return!0}}}}()}(window);</script></head>

    <body class="splash" vocab="http://schema.org/" typeof="WebPage" resource="#wb-webpage">
        


<div id="bg" data-wb-randomize="{&quot;shuffle&quot;:true, &quot;selector&quot;: &quot;img&quot;, &quot;toggle&quot;: &quot;hide&quot; }" class="wb-init wb-randomize-inited">
	<img class="hide" src="/content/canadasite/assets/canada/splash/sp-bg-1.jpg" alt="">
<img class="hide" src="/content/canadasite/assets/canada/splash/sp-bg-3.jpg" alt="">
<img class="hide" src="/content/canadasite/assets/canada/splash/sp-bg-4.jpg" alt="">
<img class="hide" src="/content/canadasite/assets/canada/splash/sp-bg-2.jpg" alt="">
<img class="hide" src="/content/canadasite/assets/canada/splash/sp-bg-5.jpg" alt="">
<img class="" src="/content/canadasite/assets/canada/splash/sp-bg-1.jpg" alt="">

</div>

<main property="mainContentOfPage" resource="#wb-main" typeof="WebPageElement">
	<div class="sp-hb">
		<div class="sp-bx col-xs-12">
			<h1 property="name" class="wb-inv">Canada.ca</h1>
			<div class="row">
				<div class="col-xs-11 col-md-8" property="publisher" resource="#wb-publisher" typeof="GovernmentOrganization">
					<img src="/etc/designs/canada/wet-boew/assets/sig-spl.svg" alt="Government of Canada" property="logo" width="283">
                    <span class="wb-inv">
                        /
                        <span lang="fr">Gouvernement du Canada</span>
                    </span>
                    <meta property="name" content="Government of Canada">
                    <meta property="name" content="Gouvernement du Canada" lang="fr">
                    <meta property="areaServed" typeof="Country" content="Canada">
				</div>
			</div>
			<div class="row">
				<section class="col-xs-6 text-right">
				<h2 class="wb-inv">Government of Canada</h2>
					<p><a href="/en.html" class="btn btn-primary">English</a></p>
				</section>
				<section class="col-xs-6" lang="fr">
				<h2 class="wb-inv">Gouvernement du Canada</h2>
					<p><a href="/fr.html" class="btn btn-primary">Français</a></p>
				</section>
			</div>
		</div>
		<div class="sp-bx-bt col-xs-12">
			<div class="row">
				<div class="col-xs-7 col-md-8">
					<a href="/en/transparency/terms.html" class="sp-lk">Terms &amp; conditions</a> <span class="glyphicon glyphicon-asterisk"></span> <a href="/fr/transparence/avis.html" class="sp-lk" lang="fr">Avis</a>
				</div>

				<div class="col-xs-5 col-md-4 text-right mrgn-bttm-md">
					<img src="/etc/designs/canada/wet-boew/assets/wmms-spl.svg" alt="Symbol of the Government of Canada / Symbole du gouvernement du Canada">
				</div>
			</div>
		</div>
	</div>
</main>
        

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/etc/designs/canada/wet-boew/js/wet-boew.min.js"></script><span id="wb-rsz" class="wb-init">&nbsp;</span>

<script src="/etc/designs/canada/wet-boew/js/theme.min.js"></script>


<script type="text/javascript">_satellite.pageBottom();</script>

    


<script>
// whitelist/blacklist 

/*
 * Domain Whitelist and domain specific settings
*/

//make sure to update thisDomain with nulls!!!
_satellite.gcCustom = {
    domain_blacklist: [
      '/analytique-analytics/',
      'checkingvisa.com'
    ],
    protocol_blacklist: ['javascript:', 'mailto:', 'tel:', 'blob:', 'data:'],

    /*Follow this syntax for adding items to the whitelist
    Double check and confirm you are adding to the STAGE or LIVE whitelist
    Double check spelling and syntax for errors
    */
    thisDomain: { AppName: null, LoginStatus: null },
    domain_whitelist: {
        //this whitelists Analytics tracking
        stage: {
            //EXAMPLE:
            //--- all items MUST inlcude a comma in order to append another line item
            //--- last item does not use comma
           // Canada.ca
            'www.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'www1.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            //'staging65s3.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'canada-aem-s3-stage.adobecqms.net': { AppName: 'canada', LoginStatus: '2' }, // New Canadian soil staging environment
            //'canada3-aem-s3-prod.adobecqms.net': { AppName: 'canada', LoginStatus: '2' },
            'dev1.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'dev3.canada.ca': { AppName: 'canada', LoginStatus: '2' },
           //BookingTool
            'apps.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'iv.apps.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'gcbooking.adobecqms.net': { AppName: 'canada', LoginStatus: '2' },
           // Search
            'search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'search.gc.ca': { AppName: null, LoginStatus: null },
            'www.search.gc.ca': { AppName: null, LoginStatus: null },
            'recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche.gc.ca': { AppName: null, LoginStatus: null },
            'wpaz-ofm12c-ssl-i.services.gc.qat': { AppName: null, LoginStatus: null },
            'staging-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'wpaz-ofm-i.sade-edap.prv': { AppName: null, LoginStatus: null },
            'wpaz-ofm-i-e-esdc.services.gc.qat': { AppName: null, LoginStatus: null },
          




        },
        live: {
            //EXAMPLE:
            //'...' : {AppName : null, LoginStatus : null}
           // Canada.ca
            'www.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'www1.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'apps.canada.ca': { AppName: null, LoginStatus: null },
            'iv.apps.canada.ca': { AppName: null, LoginStatus: null },
            'v.apps.canada.ca': { AppName: null, LoginStatus: null },
           // Search
            'search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'search.gc.ca': { AppName: null, LoginStatus: null },
            'www.search.gc.ca': { AppName: null, LoginStatus: null },
            'recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche.gc.ca': { AppName: null, LoginStatus: null }

        },

  },
 internal_filters : [
 //this is used for outbound link tracking
    //CANADA.CA (AEM)	
		,'iv.apps.canada.ca' // Booking Tool Prod
		,'v.apps.canada.ca' // Booking Tool Prod
		,'gcbooking.adobecqms.net' //Booking Tool
		,'universallabs.org' 
		,'dev1.canada.ca'
		,'dev3.canada.ca'
		,'www1.canada.ca' 
		,'canada.ca' 
		,'www.canada.ca' 
		,'canada-aem-s3-stage.adobecqms.net'
		,'staging-recherche.gc.ca' // Search
		,'recherche.gc.ca' 
		,'recherche-search.gc.ca' 
		,'search.gc.ca' 
		,'search-recherche.gc.ca'
		,'www.recherche.gc.ca' 
		,'www.recherche-search.gc.ca' 
		,'www.search.gc.ca' 
		,'www.search-recherche.gc.ca' 
		,'canada-service-corps.canada.ca' // PM Service Corps
		,'service-jeunesse.canada.ca' 
	// Library and Archives
		,'bac-lac.gc.ca'
		,'lac-bac.gc.ca'
		,'www.bac-lac.gc.ca'
		,'www.lac-bac.gc.ca'
		,'canadiana-qa.dev.bac-lac.gc.ca'
		,'central.bac-lac.gc.ca'
		,'central-d.dev.bac-lac.gc.ca'
		,'webdev-srv.dev.bac-lac.gc.ca'
		,'webqa-srv01.qa.bac-lac.gc.ca'
		,'ucc-qa'
		,'v41extweb01-d.services.bac-lac.gc.ca'
		,'canadiana.bac-lac.gc.ca'
		,'www.canadiana.bac-lac.gc.ca' 
		,'cipbookentry.bac-lac.gc.ca' 
		,'cipbookentry-qa.dev.bac-lac.gc.ca'
		,'www.cipbookentry.bac-lac.gc.ca' 
		,'co-lab.bac-lac.gc.ca' 
		,'www.co-lab.bac-lac.gc.ca' 
		,'sigles-symbols-qa.bac-lac.gc.ca'
		,'sigles-symbols.bac-lac.gc.ca' 
		,'www.sigles-symbols.bac-lac.gc.ca' 
		,'event-qa'
		,'event.bac-lac.gc.ca' 
		,'www.event.bac-lac.gc.ca' 
		,'nouvelle-france.org' 
		,'www.collectionscanada.gc.ca'
		,'cipbookentry-d.dev.bac-lac.gc.ca'
		,'v41extcapps01-d.dev.bac-lac.gc.ca'
		,'tdg-grt-d.dev.bac-lac.gc.ca'
		,'event-d.dev.bac-lac.gc.ca'
		,'canadiana-d.dev.bac-lac.gc.ca'
		,'sigles-symbols-d.bac-lac.gc.ca'
		,'dev-www.bac-lac.gc.ca'
		,'financement-funding.bac-lac.gc.ca'
		,'tdg-grt.bac-lac.gc.ca'
		,'event.bac-lac.gc.ca'
		,'sigles-symbols.bac-lac.gc.ca'
		,'webdev-srv.dev.bac-lac.gc.ca'
		,'webqa-srv01.qa.bac-lac.gc.ca'
		,'cipbookentry.bac-lac.gc.ca'
		,'www.marc21.ca'
	// Impact Assessment Agency of Canada
		,'acee.gc.ca' // Old domain (CEAA)	
		,'acee-ceaa.gc.ca' 
		,'www.acee.gc.ca' 
		,'www.acee-ceaa.gc.ca' 
		,'ceaa.dev.ec.gc.ca' 
		,'ceaa.gc.ca' 
		,'ceaa-acee.gc.ca' 
		,'www.ceaa.gc.ca' 
		,'www.ceaa-acee.gc.ca' 
		,'ceaa.qa.ncr.ec.gc.ca'
		,'www.iaac-acei.gc.ca' // New domain (IAAC)
		,'iaac-acei.gc.ca'
		,'www.acei-iaac.gc.ca'
		,'acei-iaac.gc.ca'
		,'www.iaac.gc.ca'
		,'iaac.gc.ca'
		,'www.acei.gc.ca'
		,'acei.gc.ca'
		,'www.iaac-aeic.gc.ca'
		,'iaac-aeic.gc.ca'
		,'www.aeic-iaac.gc.ca'
		,'aeic-iaac.gc.ca'
		,'www.aeic.gc.ca'
		,'aeic.gc.ca'
		,'elearning.iaac-aeic.gc.ca'
		,'apprentissage-en-ligne.aeic-iaac.gc.ca'
    // Agriculture and Agri-Food Canada
		,'www.agr.gc.ca' 
		,'agr.gc.ca' 
		,'www-dev.agr.gc.ca' 
		,'intranet.agr.gc.ca'
		,'www-tst.agr.gc.ca'
		,'canadabrandgocaccess.agr.gc.ca'
		,'canadabrandgocaccess.agr.gc.ca'	
		,'www.canadabrand.agr.gc.ca'	
		,'canadabrand.agr.gc.ca'	
		,'brandcanada.agr.gc.ca'	
		,'www.brandcanada.agr.gc.ca'	
		,'marquecanadabrand.agr.gc.ca'	
		,'www.marquecanadabrand.agr.gc.ca'
		,'agriculture.agr.gc.ca'
		,'agriculture.canada.ca'
		,'www.agriculture.canada.ca'
    // Treasury Board Secretariat	
		,'atip-aiprp.tbs-sct.gc.ca' 
		,'uat.atip-aiprp.tbs-sct.gc.ca' 
		,'pre-prod.atip-aiprp.tbs-sct.gc.ca' 
		,'authoring.publiservice.tbs-sct.gc.ca' 
		,'authoring.www.tbs-sct.gc.ca'
		,'staging.open.canada.ca'
		,'search-staging.open.canada.ca'
		,'open.canada.ca'
		,'search.open.canada.ca'
		,'ouvert.canada.ca'
		,'rechercher.ouvert.canada.ca'
		,'staging.atip-aiprp.tbs-sct.gc.ca'
		,'uat1.atip-aiprp.tbs-sct.gc.ca'
		,'uat.tbs-sct.gc.ca'
		,'www.tbs-sct.gc.ca'
		,'dev.tbs-sct.gc.ca'
    // Statistics Canada
		,'statistics.canada.ca'
		,'statistique.canada.ca'	
		,'www.statcan.gc.ca'
		,'www5.statcan.gc.ca'
		,'www12.statcan.gc.ca'
		,'www23.statcan.gc.ca'
		,'www35.statcan.gc.ca'
		,'www65.statcan.gc.ca'
		,'www66.statcan.gc.ca'
		,'www76.statcan.gc.ca'
		,'www120.statcan.gc.ca'
		,'www144.statcan.gc.ca'
		,'www150.statcan.gc.ca'
		,'information-energie.canada.ca'
		,'information-energie.statcan.gc.ca'
		,'energy-information.canada.ca'
		,'census.gc.ca'
		,'recensement.gc.ca'
		,'geosuite.statcan.gc.ca'
		,'geoprod.statcan.gc.ca'
		,'wpaz-ofm12c-ssl-i.services.gc.qat'
		,'www5testb.statcan.gc.ca'
		,'srv113-i.lab.hrdc-drhc.gc.ca'
		,'src-dev13.wcms.statcan.ca'
		,'codweb1.stcpaz.statcan.gc.ca'
		,'codweb2.stcpaz.statcan.gc.ca'
		,'stc-ndm-qa-pc2.statcan.gc.ca'
		,'stc-ndm-qa-pc2.statcan.gc.ca'
		,'prod-p-es-fusion01.stcpaz.statcan.gc.ca'
		,'census-qa.statcan.gc.ca'
		,'recensement-qa.statcan.gc.ca'
		,'qa-p-es-ui01.stcpaz.statcan.gc.ca'
		,'dv-vd-sprint1.test.cloud.statcan.ca'
		,'www.dv-vd-sprint1.test.cloud.statcan.ca'
		,'wwwqa.statcan.gc.ca'
		,'www76qa.statcan.gc.ca'
		,'geodepot.statcan.gc.ca'
		,'geodepot.statcan.ca'
		,'portal.covid.cloud.statcan.ca'          
		,'analytics-platform.statcan.gc.ca'   
		,'oc-dev.covid.cloud.statcan.ca'   
		,'web2-test1.wcms.statcan.ca'
 		,'daaas-dev.covid.cloud.statcan.ca'
		,'oc-dev.covid.cloud.statcan.ca'
	// Employment Social Developmet Canada
		,'disclosure.esdc.gc.ca' 
		,'disclosure.servicecanada.gc.ca' 
		,'www.canadabenefits.gc.ca' 
		,'www.canadabenefits.gc.ca' 
		,'wpaz-ofm12c-ssl-i.services.gc.qat' 
		,'wpaz-ofm-i.sade-edap.prv' 
		,'wpaz-ofm-i-e-esdc.services.gc.qat' 
		,'prestationsducanada.gc.ca' 
		,'www.prestationsducanada.gc.ca' 
		,'negotech.labour.gc.ca'
		,'negotheque.travail.gc.ca'
		,'mlapesd3963v-s2tst-negotech.intra.dev'
		,'cv19benefits-appservice-staging.azurewebsites.net'
		,'cv19benefits-appservice-dev.azurewebsites.net'
		,'covid-benefits.alpha.canada.ca'
		,'covid-prestations.alpha.canada.ca'
		,'woodpecker.eastus.cloudapp.azure.com'
		,'multi-benefits.servicecanada.gc.ca' //CERB DFO
		,'multi-benefices.servicecanada.gc.ca' //CERB DFO
		,'pesdc.prv'
		,'esin-sandbox.powerappsportals.com'	
		,'srv2140-i2.services.gc.qat'	
		,'srv2140-s.services.gc.qat'
		,'sin-nas.canada.ca'
		,'eservice-uat.powerappsportals.com'
		,'iidus-stdei-dev.powerappsportals.com'
		,'srv241-s2.lab.hrdc-drhc.gc.ca'
		,'srv136.services.gc.ca'
		,'alphasite.dts-stn.com'
		,'vc-frontend-static-juane.netlify.app'
		,'www.uat.youth-digital-gateway.dev'
		,'www.youth-digital-gateway.dev'
		,'www.youth.service.canada.ca'
		,'int16-ssl.services.gc.qat'
	// Elections
		,'ec9wbstepfpkedu' 
		,'elections.ca' 
		,'www.elections.ca' 
		,'enr.elections.ca' 
		,'www.test.elections.ca'
		,'enr.uat.elections.ca'		
		,'enr.test.elections.ca'
		,'ereg.elections.ca' 
		,'www.ereg.elections.ca' 
		,'ispdevwww.elections.ca' 
		,'secure.elections.ca' 
		,'secure.test.elections.ca' 
		,'rspispweb01-ste-demo1.elections.ca'
		,'ereg.test.elections.ca'
		,'ereg.elections.ca'
		,'www.ereg.elections.ca'
		,'ecdev_maint-pesc.ecade.elections.ca'
		,'www.ecdev_maint-pesc.ecade.elections.ca'
		,'cef-cce.ca'
		,'www.cef-cce.ca'
		,'ispdevwww.elections.ca'
		,'ec9wbedtpfpked'
		,'ecdevmaint-pesc.ecade.elections.ca'
		,'ec9wbeddpfpisp.elections.ca'
		,'visdev.elections.ca'
		,'enr-dev.elections.ca'
		,'rspispweb01-ste-demo1.elections.ca'
	// Natural Resources Canada
		,'equalby30.org' 
		,'www.equalby30.org' 
		,'nrcan.gc.ca' 
		,'www.nrcan.gc.ca' 
		,'rncan.gc.ca' 
		,'www.rncan.gc.ca' 
		,'rncanengagenrcan.ca' 
		,'www.rncanengagenrcan.ca' 
		,'www.rncanengagenrcan.ca' 
		,'test.nrcan.gc.ca' 
		,'test.rncan.gc.ca' 
		,'www.test.nrcan.gc.ca' 
		,'www.test.rncan.gc.ca' 
		,'minescanada.ca'
		,'www.minescanada.ca'
		,'globe-cem-mi.yourballistic.com'
		,'esrfunds.org'
		,'www.esrfunds.org'
		,'www.fondsee.org'
		,'fondsee.org'	
		,'www.npa.gc.ca'	
		,'npa.gc.ca'	
		,'www.apn.gc.ca'	
		,'www.mpmo.gc.ca'	
		,'www.bggp.gc.ca'	
		,'www.apap.gc.ca'	
		,'www.paap.gc.ca'
		,'cem-mi-vancouver2019.ca'
		,'www.cem-mi-vancouver2019.ca'
		,'cmep-mi-vancouver2019.ca'
		,'apap.gc.ca'
		,'paap.gc.ca'
		,'www.esrfunds.org'
		,'www.fondsee.org'
		,'mpmo.gc.ca'
		,'bggp.gc.ca'
		,'npa.gc.ca'
		,'apn.gc.ca'
		,'natural-resources.canada.ca' //new canada.ca subdomainsdomain
		,'ressources-naturelles.canada.ca' //new canada.ca subdomain
		,'nrcan.canada.ca' //new canada.ca subdomain
		,'rncan.canada.ca' //new canada.ca subdomain
		,'nrcan-rncan.canada.ca' //new canada.ca subdomain
		,'rncan-nrcan.canada.ca' //new canada.ca subdomain
		,'osdp-cumulative-effects-stage.canada.ca'
		,'psdo-effets-cumulatifs-stage.canada.ca'
		,'qa.dev.osdp.aws.nrcan-rncan.cloud'
		,'osdp-cumulative-effects.canada.ca'
		,'psdo-effets-cumulatifs.canada.ca'
		,'www.dev.nrcan.gc.ca'
		,'dev.nrcan.gc.ca'
		,'www.dev.rncan.gc.ca'
		,'dev.rncan.gc.ca' 
		,'dev.npa.gc.ca'
		,'dev.esrfunds.org'
		,'dev.mpmo.gc.ca'
		,'dev.apn.gc.ca'
		,'dev.fondsee.org'
		,'dev.bggp.gc.ca'
		,'osdp-psdo.canada.ca'
		,'stg-osdp-psdo.canada.ca'
		,'uat-osdp-psdo.canada.ca'
		,'qa.pst.osdp.aws.nrcan-rncan.cloud'
	// Office of the procurement ombudsman
		,'opo-boa.gc.ca' 
		,'dev.boa-opo.gc.ca' 
		,'xterra3w2k16.ncr.pwgsc.gc.ca'
		,'secure.opo-boa.gc.ca'
	// MSCA-MEIIO
		,'srv113-i.lab.hrdc-drhc.gc.ca' 
		,'srv113-u.lab.hrdc-drhc.gc.ca' 
		,'srv136.services.gc.ca' 
		,'srv2140-u.services.gc.qat' 
		,'srv241-s2.lab.hrdc-drhc.gc.ca' 
	// Transport Canada
		,'transport-dev' 
	// Health Canada
		,'a8047055' 
		,'cfgtest.canadacentral.cloudapp.azure.com' //food guide
		,'vmportaltest.canadacentral.cloudapp.azure.com'
		,'prcitestfr.canadacentral.cloudapp.azure.com'
		,'food-guide.canada.ca'
		,'www.food-guide.canada.ca'
		,'www.guide-alimentaire.canada.ca'
		,'guide-alimentaire.canada.ca'
		,'clinical-information.canada.ca'
		,'renseignements-cliniques.canada.ca'
		,'cfg-qa.hres.ca'
		,'cfg-stage.hres.ca'
		,'food-guide-stage.hpfb-dgpsa.ca'
		,'guide-alimentaire-stage.hpfb-dgpsa.ca'
		,'prci-dev.jack.hc-sc.gc.ca'
	// Immigration Refugee Canada
		,'www.cic.gc.ca'
		,'cic.gc.ca'
		,'eservices1.ci.gc.ca'
		,'gol-ecas-dev.ci.gc.ca'
		,'www-dev.ic.gc.ca'
		,'eservices.cic.gc.ca'
		,'services3.cic.gc.ca'
		,'eservices5.ci.gc.ca'
        ,'eservices1.ci.gc.ca'
        ,'web.passport-online-staging.apps.cic.gc.ca'
        ,'web.passeport-enligne-staging.apps.cic.gc.ca'
        ,'web.passport-online-development.apps.cic.gc.ca'
        ,'web.passeport-enligne-developmente.apps.cic.gc.ca'
        ,'njes1s6362.apps.ci.gc.ca'
        ,'atip-aiprp.apps.gc.ca'
		,'ircc.canada.ca'
	// Canada Revenue Agency
		,'cra-arc.gc.ca'
		,'arc-cra.gc.ca'
		,'cra.gc.ca'
		,'arc.gc.ca'
		,'www.cra-arc.gc.ca'
		,'www.arc-cra.gc.ca'
		,'www.cra.gc.ca'
		,'www.arc.gc.ca'
		,'apps.cra-arc.gc.ca'
		//CRA UT
		,'cp-ut.isvcs.net'
		,'rp-ut.isvcs.net'
		,'cp-ut2.isvcs.net'
		,'rp-ut2.isvcs.net'
		//CRA SI
		,'ams-sga-si.cra-arc.gc.ca'
		,'cms-sgj-si.cra-arc.gc.ca'
		,'ams-sga-si2.cra-arc.gc.ca'
		,'cms-sgj-si2.cra-arc.gc.ca'
		//CRA UA
		,'ams-sga-ua.cra-arc.gc.ca'
		,'cms-sgj-ua.cra-arc.gc.ca'
		,'ams-sga-ua2.cra-arc.gc.ca'
		,'cms-sgj-ua2.cra-arc.gc.ca'
		//CRA OT	
		,'apps1.ams-sga-ot.cra-arc.gc.ca'
		,'apps2.ams-sga-ot.cra-arc.gc.ca'
		,'apps3.ams-sga-ot.cra-arc.gc.ca'
		,'apps4.ams-sga-ot.cra-arc.gc.ca'
		,'apps5.ams-sga-ot.cra-arc.gc.ca'
		,'apps6.ams-sga-ot.cra-arc.gc.ca'
		,'apps7.ams-sga-ot.cra-arc.gc.ca'
		,'apps8.ams-sga-ot.cra-arc.gc.ca'
		,'cms-sgj-ot.cra-arc.gc.ca'
		,'apps1.ams-sga-ot2.cra-arc.gc.ca'
		,'apps2.ams-sga-ot2.cra-arc.gc.ca'
		,'apps3.ams-sga-ot2.cra-arc.gc.ca'
		,'apps4.ams-sga-ot2.cra-arc.gc.ca'
		,'apps5.ams-sga-ot2.cra-arc.gc.ca'
		,'apps6.ams-sga-ot2.cra-arc.gc.ca'
		,'apps7.ams-sga-ot2.cra-arc.gc.ca'
		,'apps8.ams-sga-ot2.cra-arc.gc.ca'
		,'cms-sgj-ot2.cra-arc.gc.ca'
		,'ams-sga.cra-arc.gc.ca'
		,'cms-sgj.cra-arc.gc.ca'
		,'apps1.ams-sga.cra-arc.gc.ca'
		,'apps2.ams-sga.cra-arc.gc.ca'
		,'apps3.ams-sga.cra-arc.gc.ca'
		,'apps4.ams-sga.cra-arc.gc.ca'
		,'apps5.ams-sga.cra-arc.gc.ca'
		,'apps6.ams-sga.cra-arc.gc.ca'
		,'apps7.ams-sga.cra-arc.gc.ca'
		,'apps8.ams-sga.cra-arc.gc.ca'
		,'www.ams-sga.cra-arc.gc.ca'
		,'www.cms-sgj.cra-arc.gc.ca'
		,'www.apps1.ams-sga.cra-arc.gc.ca'
		,'www.apps2.ams-sga.cra-arc.gc.ca'
		,'www.apps3.ams-sga.cra-arc.gc.ca'
		,'www.apps4.ams-sga.cra-arc.gc.ca'
		,'www.apps5.ams-sga.cra-arc.gc.ca'
		,'www.apps6.ams-sga.cra-arc.gc.ca'
		,'www.apps7.ams-sga.cra-arc.gc.ca'
		,'www.apps8.ams-sga.cra-arc.gc.ca'
		,'apps-ut.cra-arc.gc.ca'
		,'apps-ua.cra-arc.gc.ca' 
		,'apps-ut.isvcs.net'
		,'apps-ua.isvcs.net'
		,'apps-ut2.cra-arc.gc.ca'
		,'apps-ua2.cra-arc.gc.ca'
		,'apps-ut2.isvcs.net'
		,'apps-ua2.isvcs.net'
		,'performance.alpha.canada.ca'
		,'cp-ut.isvcs.net'
		,'apps-ut.isvcs.net'
		,'xterra3w2k16.dev.ad.itsso-ospti.gc.ca'
	// Public Services procurement Canada
		,'test.publications.gc.ca'
		,'publications.gc.ca'
		,'www.publications.gc.ca'
		,'content.buyandsell.gc.ca'
		,'beta.buyandsell.gc.ca'
		,'beta.achatsetventes.gc.ca'
		,'test.buyandsell.gc.ca'	
		,'test.achatsetventes.gc.ca'
		,'webdev02.tpsgc-pwgsc.gc.ca'
		,'www.tpsgc-pwgsc.gc.ca'
		,'buyandsell.gc.ca'
		,'achatsetventes.gc.ca'
		,'staging.achatscanadabuys.ca'
		,'m8-test.achatscanadabuys.ca'
		,'m8-test.achatscanadabuys.ca'
		,'m8-dev-collab.achatscanadabuys.ca'
		,'webdev01.tpsgc-pwgsc.gc.ca'
		,'webdev02.tpsgc-pwgsc.gc.ca'
		,'webdev08.tpsgc-pwgsc.gc.ca'
		,'m8-uat.achatscanadabuys.ca'
		,'masource-mysource.shp.dev.global.gc.ca'
		,'intranet.tpsgc-pwgsc.gc.ca'
		,'masource-mysource.spac-pspc.gc.ca'
		,'gcintranet.tpsgc-pwgsc.gc.ca'
	// Global Affiars Canada
		,'www.international.gc.ca'
		,'international.gc.ca'
		,'www.tradecommissioner.gc.ca'
		,'tradecommissioner.gc.ca'
		,'www.deleguescommerciaux.gc.ca'
		,'deleguescommerciaux.gc.ca'
		,'travel-ace-m2'
		,'voyage-ace-m2' 
		,'www.travel.gc.ca'
		,'travel.gc.ca'
		,'www.voyage.gc.ca' 
		,'voyage.gc.ca' 
		,'www.core-ombuds.canada.ca'
		,'core-ombuds.canada.ca'
		,'www.educanada.ca'
		,'deleguescommerciaux.gc.ca'
		,'educanada.ca'
		,'www.educanada.ca'
	// Justice Canada
		,'www-uat.justice.gc.ca'
		,'limsdev.justice.gc.ca'
		,'dmteam-uat.justice.gc.ca'
		,'equipesm-uat.justice.gc.ca'
		,'www-uat.victimsfirst.gc.ca'
		,'www-uat.victimesdabord.gc.ca'
		,'jusnet-uat.justice.gc.ca'
		,'www-uat.victimsweek.gc.ca'
		,'www-uat.semainedesvictimes.gc.ca'
		,'www.justice.gc.ca'
		,'justice.gc.ca'
		,'dmteam.justice.gc.ca'
		,'equipesm.justice.gc.ca'
		,'www.laws-lois.justice.gc.ca'
		,'laws-lois.justice.gc.ca'
		,'lois-laws.justice.gc.ca'
		,'www.lois-laws.justice.gc.ca'
		,'laws.justice.gc.ca'	
		,'lois.justice.gc.ca'		
		,'www.ppsc.gc.ca'
		,'ppsc.gc.ca'
		,'www.victimsweek.gc.ca'
		,'www.semainedesvictimes.gc.ca'
		,'victimsweek.gc.ca'
		,'semainedesvictimes.gc.ca'
		,'jusnet.justice.gc.ca'
	// Canadian Food Inspection Agency
		,'inspection.gc.ca'
		,'www.inspection.gc.ca'
		,'inspection.canada.ca'
		,'www.inspection.canada.ca'
		,'active.inspection.gc.ca'
		,'www.active.inspection.gc.ca'
		,'merlin.cfia-acia.inspection.gc.ca'
		,'apps.merlin.cfia-acia.inspection.gc.ca'
		,'www.apps.merlin.cfia-acia.inspection.gc.ca'
		,'inspection.canada.ca'
	// Public Safety Canada
		,'infomediadev'
		,'infomedia.gc.ca'
		,'www.infomedia.gc.ca'
		,'beta.infomedia.gc.ca'
		,'api.infomedia.gc.ca'
		,'icdev'
		,'psdev'
		,'gpdev'
		,'psdev'
		,'gpdev'
		,'ecdev'
		,'icdev'
		,'publicsafety.gc.ca'
		,'www.publicsafety.gc.ca'
		,'securitepublique.gc.ca'
		,'www.securitepublique.gc.ca'
		,'getprepared.gc.ca'
		,'www.getprepared.gc.ca'
		,'preparez-vous.gc.ca'
		,'www.preparez-vous.gc.ca'
		,'erc-cee.gc.ca'
		,'www.erc-cee.gc.ca'
		,'infocentral'
		,'infocentrale'
		,'infocentral'
	// RCMP External Review Committee
		,'ercdev'
	// Open Government
		,'staging.open.canada.ca'
		,'stadification.ouvert.canada.ca'
		,'open.canada.ca'
		,'ouvert.canada.ca'
		,'search.open.canada.ca'
		,'rechercher.ouvert.canada.ca'
	// Correctional Investigator Canada
		,'www.oci-bec.gc.ca'
		,'oci-bec.gc.ca'
	//Public Service Commission
		,'intracom'
		,'intradev'
		,'intracom.psc-cfp.gc.ca'
		,'extranet.psc-cfp.gc.ca'
		,'devextranet.psc-cfp.gc.ca'
		,'test-psjobs-emploisfp.psc-cfp.gc.ca'
		,'emploisfp-psjobs.cfp-psc.gc.ca'
	//Superintendent of Financial Institutions Canada (Office of the)
		,'devirppub.devosfi.ca'
		,'uatirppub.devosfi.ca'
		,'uatirppub.osfi-bsif.gc.ca'	
		,'uatirppub.devosfi.ca'	
		,'www.osfi-bsif.gc.ca'
	//Women and Gender Equality Canada	
		,'canada'	
		,'intranettest'	
		,'intranet'	
		,'femmes-egalite-genres.canada.ca'
		,'women-gender-equality.canada.ca'
		,'intranet.fegc-wage.gc.ca'
	//Canadian Space Agency
		,'devcorpo'
		,'asc-csa.gc.ca'
		,'www.asc-csa.gc.ca'
		,'csa-asc.gc.ca'
		,'www.csa-asc.gc.ca'
		,'appsqa.asc-csa.gc.ca'
		,'www4.asc-csa.gc.ca'
		,'datatest.asc-csa.gc.ca'
		,'donnees-data.asc-csa.gc.ca'

	

 ]
};




/* ===== Set data elements that rely on whitelist ===== */

/*jsAbort START*/
var dirs;
var list;
var h = document.location.hostname.toLowerCase(); //host
var j = document.location.pathname.toLowerCase(); //path

if (_satellite.buildInfo.environment == "production") {
    list = _satellite.gcCustom.domain_whitelist.live;
}
else {
    list = _satellite.gcCustom.domain_whitelist.stage;
    //list = _satellite.gcCustom.domain_whitelist.live; //FOR TESTING ON LIVE ONLY! REMOVE

}

//directories to exclude
///Input list. Each item must be inputed with its own quotation marks and be separted using a comma
/// excl list cannot be empty
excl=_satellite.gcCustom.domain_blacklist

var j = document.location.host + document.location.pathname.toLowerCase(); //path
var toExcl = false; //set to false by default
for (var i in excl) {
    if (j.indexOf(excl[i]) > -1) {
        toExcl = true;
    }
}
//end directory exclusions

//sets the data element
if (typeof list[h] === 'undefined' || toExcl === true) {
    _satellite.setVar('jsAbort', 'true'); //set to true
    //_satellite.cookie.set('blackList', 'yes'); //set blackList cookie so previous values are not set on next page
    window.blackList = 'yes';
    _satellite.cookie.set('prev_page_blackList', 'yes')
}
else {
    _satellite.gcCustom.thisDomain = list[h];
    _satellite.setVar('jsAbort', 'false');
    window.blackList = 'no';
};

/*jsAbort END*/

</script><iframe sandbox="allow-scripts allow-same-origin" title="Adobe ID Syncing iFrame" id="destination_publishing_iframe_canada_0" name="destination_publishing_iframe_canada_0_name" style="display: none; width: 0px; height: 0px;" src="https://canada.demdex.net/dest5.html?d_nsid=0#https%3A%2F%2Fwww.canada.ca" class="aamIframeLoaded"></iframe><script>
function MediaSetup() {
    var mltmd = jQuery(".wb-mltmd");
    var mltmdSet = new Array(mltmd.length);
      
    for(var i=0; i < mltmd.length; i++)  {
      var e = mltmd.get(i);
      var md = jQuery(e);
      var va = md.find("video,audio");
      if(va.length > 0) {
          
          //Video Title
          var ttl = va.attr("title");
          if(ttl == null || ttl.length < 1){
              ttl = "";
          }
          
          //Video or Audio and Format (video/youtube)
          var type = va.find("source").attr("type");
          var frmt2 = "";
          if(type == null || type.length < 1){
              type = "";
              frmt = "";
          }
          else {
              var frmt = type.split("/", 2);
              if(frmt.length > 1)
                  frmt2 = frmt[0];
          }
          
          //Source URL
          var src = va.find("source").attr("src");
          if(src == null || src.length < 1){
              src = "";
          }
          
          
          mltmdSet[i] = {
          el:e,
          ct:0, 
          tt:0,
          vid_per:0,
          vid_sent_per: new Array(),
          title:ttl,
          vidOrAud:frmt2,
          source:src,
          format:type,
          playSent:false,      
          endedSent:false 
          };
          
          md.on("playing timeupdate ended", jQuery.proxy(function(x){
          var m = jQuery(this.el);
          
          switch(x.type){
              case "playing":
              if(this.playSent == false){
                var duration = m.find(".wb-mm-tmln-ttl span:not(.wb-inv)").text().trim();
                if(!/[0-9]{2}:[0-9]{2}:[0-9]{2}/.test(duration))
                  duration = "00:00:00";
                if(this.tt == 0)
                  this.tt = Math.floor(Date.parse("Thu, 01 Jan 1970, "+duration+" GMT-0400") - Date.parse("Thu, 01 Jan 1970, 00:00:00 GMT-0400"));
                if(this.tt !== 0){
                  _satellite.setVar("jsMediaTitle", this.title);
                  _satellite.setVar("jsMediaType", this.vidOrAud);
                  _satellite.setVar("jsMediaFormat", this.format);
                  _satellite.setVar("jsMediaSource", this.source);
                  _satellite.track("media play");
                  this.playSent=true;  
                }
              }
              break;
              case "timeupdate":
              var currentTime = m.find(".wb-mm-tmln-crrnt span:not(.wb-inv)").text().trim();
              if(!/[0-9]{2}:[0-9]{2}:[0-9]{2}/.test(currentTime))
                    currentTime = "00:00:00";
              var ctime = Math.floor(Date.parse("Thu, 01 Jan 1970, "+currentTime+" GMT-0400") - Date.parse("Thu, 01 Jan 1970, 00:00:00 GMT-0400"));
              
              var timeParts = 10;
              var timeMark = Math.floor(this.tt / timeParts);
  
              if (ctime !== 0) {
                  if(this.ct !== ctime){
                          this.ct = ctime;
                  for (var i = 1; i <= timeParts; i++) {
                      if (this.ct == Math.round(timeMark * i / 1000)*1000) {
                      this.vid_per = (100/timeParts) * i;
                      i=timeParts;
                      }
                  } 
                  
                  switch(this.vid_per){
                      case 20:
                      var sent = jQuery.inArray(this.vid_per, this.vid_sent_per);
                      if (sent < 0) {
                          _satellite.setVar("jsMediaTitle", this.title);
                          _satellite.setVar("jsMediaType", this.vidOrAud);
                          _satellite.setVar("jsMediaFormat", this.format);
                          _satellite.setVar("jsMediaSource", this.source);
                          _satellite.track("media mark 20");
                          this.vid_sent_per.push(this.vid_per);
                      }
                      break;
                      case 50:
                      var sent = jQuery.inArray(this.vid_per, this.vid_sent_per);
                      if (sent < 0) {
                          _satellite.setVar("jsMediaTitle", this.title);
                          _satellite.setVar("jsMediaType", this.vidOrAud);
                          _satellite.setVar("jsMediaFormat", this.format);
                          _satellite.setVar("jsMediaSource", this.source);
                          _satellite.track("media mark 50");
                          this.vid_sent_per.push(this.vid_per);
                      }
                      break;
                      case 80:
                      var sent = jQuery.inArray(this.vid_per, this.vid_sent_per);
                      if (sent < 0) {
                          _satellite.setVar("jsMediaTitle", this.title);
                          _satellite.setVar("jsMediaType", this.vidOrAud);
                          _satellite.setVar("jsMediaFormat", this.format);
                          _satellite.setVar("jsMediaSource", this.source);
                          _satellite.track("media mark 80");
                          this.vid_sent_per.push(this.vid_per);
                      }
                      break;  
                  }
                  }
                  }
              break;    
          }
          },mltmdSet[i]));    
      }
    }	
  }
  if(typeof jQuery === "function"){ 
    MediaSetup();
  } else {
    setTimeout(function(){
      if(typeof jQuery === "function"){ 
        MediaSetup();
      } 	  
    }, 500);
  }
</script><script>
sessionStorage.setItem("device", "desktop");
</script><script>
//***************************************************
/*****


-----------------------
Invitation Manager v1.0-----------------------

Dependencies on _satellite object
	*	_satellite.gcCustom (adds new functions to this object)
	*	_satellite.browserInfo.browser
	*	_satellite.getVar("PageTheme-PageLanguage")
	*	_satellite.getVar("PageCreator")
	*	_satellite.getVar("ErrorPageType")-


Dependencies on s_c_il[1] object
	*	s_c_il[1].eVar4

*****/
//***************************************************


_satellite.gcCustom.storage = {
    set : function(n, v, e) {
        var o = {val: v, t: new Date().getTime() + e*86400}
        var t = (e === 0) ? sessionStorage : localStorage;
        t.setItem(n, JSON.stringify(o));
    },
    get : function (n) {
        var b = sessionStorage.getItem(n);
        if (b != null)
            return JSON.parse(b).val;
        else
            b = localStorage.getItem(n);
        if (b != null) {
            var c = JSON.parse(b);
            if (c.t > new Date().getTime())
                return c.val;
        }
        return null;
    },
    remove : function (n) {
        sessionStorage.removeItem(n);
        localStorage.removeItem(n);
    }
}

window.addEventListener( "load", imSetup);

function imSetup() {
"use strict";

//document each variables purpose

var debugMode, //if true, log console info
    surveyDB, //JSON var of data stored in im.xml 
    surveyScope, //string of what survey page, institution, theme...
    overrideScope = false,  //query parameter sets this to a text value to force the scope hat
    overrideStart = false,  //query parameter sets this to true to ignore the start date of surveys
    overrideID, //query parameter sets this to an id value for a specific survey
    dtmSettings = { 
        
        //page types that im.xml is not allowed ( = false) to run on
        enablePages : {
            404 : false, 
            500 : false, 
            403 : false, 
            splash : false
        },
        
        //name of local or session storage values
        storageNames : {
            persistent : "im-invited",
            session : "im-settings"
        },
        
        //location of im.xml
        dbURL : "/content/dam/canada/json/im.xml"
    };
try {
    //	Test if local storage is available/enabled before starting
    var mod = "test";
    localStorage.setItem(mod, mod);
    localStorage.removeItem(mod);
    main();
} catch (e) {
    return false;
}


function main() {
    
    //Enable console logging if debug mode is turned on
    debugMode = checkEnableDebugMode();
    
    clog("Start");
    
    //Make sure IM is allowed to run on this page type
    if (checkPageTypeAllowed() === false)
        return;
    
    //check if any special parameters are used for testing reasons
    checkTestParams();

    //if user has not seen a survey
     if (localStorage.getItem('lastDateIMShown') === null) {
        
        //check if DB is already in session storage
        surveyDB = _satellite.gcCustom.storage.get(dtmSettings.storageNames.session)
        
        //download the DB if it's not already stored
        if (surveyDB == null){
            downloadSurveyDB();
            //asynchronous call, do not execute code here
        }
        else{
            main2();
        }
    }
    else {
        clog("User has seen an invitation already");
          
        
        //	Invitation was not within the last 15 days...
        surveyDB = _satellite.gcCustom.storage.get(dtmSettings.storageNames.session);
        var lastDateIMShown;
        if (localStorage.getItem('lastDateIMShown') !== null) {
            lastDateIMShown = new Date(localStorage.getItem('lastDateIMShown'));
        }

        if (isStorageExpired(lastDateIMShown)) {
            _satellite.gcCustom.storage.remove('lastDateIMShown');
            main2();
        }
        
     // clog( "persistent IM duration: " + _satellite.gcCustom.storage.get(dtmSettings.storageNames.session.settings.persistent_cookie_duration));
    }
    
    //asynchronous call may have been made, do not execute code here
}

function main2() {
    //	Makes sure that the surveyDB object is set, it could not have been defined if localStorage was not defined and the XML is unfound on the server
    /*	To test v.settings is undefined
    if (!surveyDB) {
        return;
    }*/
    
    //at this point, we don't know if the DB was just downloaded or if it was retrieved from session storage.
    //If the DB doesn't have a scopeHat then we know we need to decide on which scope hat to give
    if (typeof surveyDB.settings.scopeHat === "undefined"){
        firstTimeSetup();
    }

    //Check if we need to override the scope hat
    //This is needed since firstTimeSetup won't run if this is not the first page of the visit
    if (overrideScope){
        surveyDB.settings.scopeHat = overrideScope;
    }

    surveyScope = surveyDB.settings.scopeHat;
    
    clog("Scope hat = " + surveyScope + ", " + surveyDB.surveys.length + " potential surveys, removing surveys outside of date range");
    
    // Delete all surveys that are outside of working dates
    var list = surveyDB.surveys;
    for (var i = 0; i < list.length; i++) {
        var n = new Date().getTime();
        if (n < new Date(list[i].start_date_time).getTime() || n >= new Date(list[i].end_date_time).getTime()) {
            
            //if overriding start date and still before end date then don't delete this survey
            if (overrideStart && n < new Date(list[i].end_date_time).getTime())
                continue;
            
            //Splice removes the element from the array
            list.splice(i,1);
            //decrement i since the next record has moved to replace the current record
            i--;
        }
    }
    
    clog(surveyDB.surveys.length + " potential surveys, removing surveys based on targeting");
    
    // Delete all surveys that don't match browser and/or device type
    var list = surveyDB.surveys;
    
    for (var i = 0; i < list.length; i++) {
        
        var b = true;
        
        //avoid_browsers is an array of browser names to avoid the names of the browsers match those reported by _satellite.browserInfo.browser
        var sublist = getObjArr(list[i].avoid_browsers);
        for (var j = 0; j < sublist.length; j++)
            if (_satellite.browserInfo.browser == sublist[j].Value)
                b = false;
        
        //target_device is either non-existant, "Desktop" or "Mobile" which matches the values in eVar 4
        if (typeof list[i].target_device !== "undefined" && typeof list[i].target_device === "string" && !(s_c_il[1].eVar4.toLowerCase() == list[i].target_device.toLowerCase()) )
            b = false;
        
        //target_language is checked against navigator.language
        if (typeof list[i].target_language !== "undefined" && typeof list[i].target_language === "string" && !(new RegExp(list[i].target_language, 'i').test(navigator.language)) )
            b = false;
        
        
        //if anything caused b to be false, delete the survey from the DB
        if (b === false) {
            list.splice(i,1);
            //decrement i since the next record has moved to replace the current record
            i--;
        }
    }
    
    clog(surveyDB.surveys.length + " potential surveys");
    
    //save the DB to session storage
    _satellite.gcCustom.storage.set(dtmSettings.storageNames.session, surveyDB, 0);
    
    clog("Checking whitelist");
    
    // Check if url on whitelist
    var list = getObjArr(surveyDB.settings.tbl_url_whitelist), a = document.location, h = a.hostname + a.pathname, didMatch = false;
    if (typeof list === "undefined")
        return false;

    for (var i = 0; i < list.length; i++) {
        var b = new RegExp(list[i].url, "i");
        if (b.test(h))
            didMatch = true;
    }
    if (didMatch === false)
        return false;
    
    clog("Checking blacklist");
    
    //Check if url on blacklist
    var list = getObjArr(surveyDB.settings.tbl_url_blacklist), a = document.location, h = a.hostname + a.pathname;
    for (var i = 0; i < list.length; i++) {
        if (list[i].url.toLowerCase() == h.toLowerCase())
            return false;
    }
    
    clog("Removing surveys based on page attributes");
    
    //make a deep copy of the survey DB before we remove the applicable surveys 
    //this is needed because getPageAttributeMatches will delete any surveys that match from the surveyDB list
    var cpySurveys = JSON.parse(JSON.stringify(surveyDB.surveys));
    
    //b will be the index of a survey in cpySurveys that was chosen otherwise it will be undefined if no survey was selected
    var b = getWeightedRandom(getPageAttributeMatches());

    /*console.dir(cpySurveys)
        console.dir(surveyDB)*/
        
    if (typeof b !== "undefined") {

        for (var j = 0; j < cpySurveys.length; j++) {
            if(cpySurveys[j].id === b){
            var selectedSurveyIndex = j;
            break;

            }
        }
        
        clog("Select survey " + cpySurveys[selectedSurveyIndex].survey_name);
        
        //assume that the visitor will ignore the survey. This way no more invitations for X days
        //	_satellite.gcCustom.storage.set( dtmSettings.storageNames.persistent, "ignored", surveyDB.settings.persistent_cookie_duration );


      //Show survey only if user hasn't seen it last 15 days
        var lastDateIMShown;
        var now = new Date();
        
        if (localStorage.getItem('lastDateIMShown') !== null) {
            lastDateIMShown = new Date(localStorage.getItem('lastDateIMShown'));
        }

    //	Persistent cookie duration is the number of days of minimal interval between 2 surveys
        if (!isStorageExpired(lastDateIMShown)) {
               //popup the survey
            invite(cpySurveys[selectedSurveyIndex]);
            //set the date visitor was invited
            localStorage.setItem('lastDateIMShown', now);
        }

          //end 15 days conditions


        //	popup the survey
        //	invite(cpySurveys[b]);
    }
    else {
        clog("No survey selected, " + surveyDB.surveys.length + " surveys remain in session storage");
        //save the updated DB to session storage
        //the DB must be saved here since we need to remove surveys that were applicable on this page so we don't test for them again in the visit
        _satellite.gcCustom.storage.set(dtmSettings.storageNames.session, surveyDB, 0);
    }

}

function getPageAttributeMatches() {

    //Return list of valid surveys based on page / institution / theme / site and check if override survey id needed
    //Remove surveys that are valid from the surveyDB array so that when we save it, those ones are removed and not tested on future pages in the visit
    
var surveySubList = {};
    var url = (document.location.hostname + document.location.pathname).toLowerCase();
    var count = 0;
    
    for (var i = 0; i < surveyDB.surveys.length; i++) {
        if (overrideID) {
                //skip this loop's logic if it's not the desired survey, therefore there's no chance it will be selected
            if (surveyDB.surveys[i].id !== overrideID){
            
                continue;
            }  

            //if it is the desired survey, set it's probability to 100%. Note that the desired survey must still be applicable on this page so the logic in the swtich statement still must execute meet the conditions
            surveyDB.surveys[i].probability = 1;
        }

        
        switch(surveyDB.surveys[i].type) {
            case "Entire site":
            
                //get an object array of the sites to run the survey on
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_sites);
                
                for (var c = 0; c < sublist.length; c++) {
                    
                    //convert the value for the site into RegExp non-case sensitive
                    var b = new RegExp(sublist[c].site, "i");
                    
                    //if the url matches the regEx
                    if (b.test(url)) {
                        
                        //store this survey's id and probability in the new object (this object is later fed to getWeightedRandom)
                        //convert site survey probability into rate since it is between 0 and Visitor Allocation for site wide type
                    
                        surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability / surveyDB.settings.Site;
                        //keep track of the number of surveys that apply so we can console log it later
                        count++;

                        //clog(surveyDB.surveys[i].survey_name + " " + surveyDB.surveys[i].probability + " out of " + surveyDB.settings.Site)
                        
                        //remove this survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
                
            case "Theme":
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_themes);
                for (var c = 0; c < sublist.length; c++) {
                    if (_satellite.getVar("PageTheme-PageLanguage").toLowerCase() == sublist[c].theme.toLowerCase()) {
                //		
          surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability;
                        count++;
                        
                        //remove the eligible survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
                
            case "Institution":
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_institutions);
                for (var c = 0; c < sublist.length; c++) {
                    if (_satellite.getVar("PageCreator").toLowerCase().indexOf(sublist[c].institution.toLowerCase()) === 0) {
                    
          surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability;
                        count++;
                        
                        //remove the eligible survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
                
            case "Page":
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_urls);
                for (var c = 0; c < sublist.length; c++) {
                    if (window.location.href.toLowerCase().indexOf(sublist[c].url.toLowerCase()) !== -1) {
                    
         surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability;
                        count++;
                        
                        //remove the eligible survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
        }
                
        
    }
    clog(count + " potential surveys, selecting a survey");

    return surveySubList;
}


function firstTimeSetup() {
    //Objectives
    //Allocate a scope hat
    //Remove surveys that don't match the scope hat
    
    //tmpSurveyDB is where we will copy all of the wanted data from surveyDB into (this removes non applicable scope surveys)
    var tmpSurveyDB = {settings : {}, surveys : []}
    
    clog("Rolling probability for scope hat");
    
    if (overrideScope)
        surveyScope = overrideScope;
    else
        surveyScope = getWeightedRandom({"Page":surveyDB.settings.Page, "Institution":surveyDB.settings.Institution, "Theme":surveyDB.settings.Theme, "Entire site":surveyDB.settings.Site});

    
    //get an object array of all surveys in the DB
    var list = getObjArr(surveyDB.qry_active_surveys);

    clog(list.length + " potential surveys, removing surveys that don't match scope hat");

    for (var i = 0; i < list.length; i++) {
        
        //Get only surveys that apply to this scope
        if (list[i].type == surveyScope) {
            
            //copy good surveys tmpSurveyDB
            tmpSurveyDB.surveys[tmpSurveyDB.surveys.length] = list[i];
        }
    }
    
    //put all the needed settings into tmpSurveyDB
    tmpSurveyDB.settings.Site = surveyDB.settings.Site;
    tmpSurveyDB.settings.scopeHat = surveyScope;
    tmpSurveyDB.settings.tbl_url_whitelist = surveyDB.settings.tbl_url_whitelist;
    tmpSurveyDB.settings.tbl_url_blacklist = surveyDB.settings.tbl_url_blacklist;
    tmpSurveyDB.settings.persistent_cookie_duration = surveyDB.settings.persistent_cookie_duration;
    
    //set surveyDB to tmpSurveyDB so we can be sure that surveyDB is the good variable
    surveyDB = tmpSurveyDB;
}

function getWeightedRandom(spec) {
    //Objectives
        //Given a JSON array of values and probabilities, output the weighted random selection. For example {coffee : 0.20, tea : 0.80}
        //Output nothing if no selection is made (I.E. undefined)
    var i, sum=0, r=Math.random();
    for (i in spec) {
        
        //be sure to never select something with 0% probability !, since Math.random() can be 0!
        if (spec[i] == 0)
            continue;
        sum += Number(spec[i]);
        if (r <= sum)
            return i;
    }
}

function saveDbAsJSON(dbData) {
    //Objectives
        //Convert dbData into JSON
        //Set surveyDB to the dataroot node and log the version number
    var x, c;
    //clog("saveDbAsJSON()");
    try{x = $.parseXML(dbData); c = xmlToJson(x)}
    catch(e){clog("Converting XML to JSON encountered an error: " + e.message);return false}

    surveyDB = c.dataroot;
    clog("im.xml version: " + x.documentElement.getAttribute("generated"));
    main2();
}

function downloadSurveyDB() {
    clog("Downloading survey database")
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4) {
            clog("Download status = " + xmlHttp.statusText);
            
            if (xmlHttp.status == 200) {
                var b = xmlHttp.responseText;
                if (b && b != "" && typeof(b) != "undefined")
                    saveDbAsJSON(b.replace(/\r?\n|\r/g, "").replace(/\\u[\dA-F]{4}/gi, function (match) {return String.fromCharCode(parseInt(match.replace(/\\u/g, ''), 16))}));
            }
        }
    }
    xmlHttp.open("GET", dtmSettings.dbURL, true); // true for asynchronous 
    xmlHttp.send(null);
}
//Take a date object as parameter
function isStorageExpired(storageDate) {
    var now = new Date();
    //storageDate = new Date(storageDate);
//	Persistent cookie duration is the number of days of minimal interval between 2 surveys
    if (((now - storageDate) <= (surveyDB.settings.persistent_cookie_duration * 86400000)) || !storageDate || typeof storageDate === "undefined") {
        return false;
    }
    return true;
}

function checkTestParams() {
    //Objectives
        //action any special query parameters
    if  (/[?&]im_nocookiecheck=1/i.test(document.location.search)) {
        //delete these cookies
        clog("Treat visitor as new visitor (deleting locally stored data)");
        _satellite.gcCustom.storage.remove( dtmSettings.storageNames.persistent );
        _satellite.gcCustom.storage.remove( dtmSettings.storageNames.session );
          localStorage.removeItem('lastDateIMShown');
    }
    
    if ( (/[?&]im_scope=page/i.test(document.location.search)))
        overrideScope = "Page";
    else if ( (/[?&]im_scope=institution/i.test(document.location.search)))
        overrideScope = "Institution";
    else if ( (/[?&]im_scope=theme/i.test(document.location.search)))
        overrideScope = "Theme";
    else if ( (/[?&]im_scope=site/i.test(document.location.search)))
        overrideScope = "Entire site";
    
    if ( (/[?&]im_nodatecheck=1/i.test(document.location.search)))
        overrideStart = true;
    
    var b = /[?&]im_surveyid=([^?&]+)/.exec(document.location.search);
    if (b !== null )
        overrideID = b[1];
}

function checkPageTypeAllowed() {
    //Objectives
        //return true if the page type is allowed and false otherwise
    var b;
    // 1.	Check if splash page
    if ( $( "body" ).hasClass( "splash" ) ) 
        b = "splash";

    // 2.	Check if 404 page
    //if (_satellite.dataElements["ErrorPageType"].default != _satellite.getVar("ErrorPageType"))
    if (_satellite.getVar("ErrorPageType") != 'blank error page type')
        b = _satellite.getVar("ErrorPageType");
    
    if (b != null)
        return dtmSettings.enablePages[b];
    
    return true;
}

function checkEnableDebugMode() {
    //Objectives
        //Set the local storage token to remember to log console info
    if (/[?&]logim=(true|1)/i.test(document.location.search))
        localStorage.setItem('dtm-logim', 1);

    if (/[?&]logim=(false|0)/i.test(document.location.search))
        localStorage.removeItem('dtm-logim');
    
    return (localStorage.getItem('dtm-logim') == 1);
}

/**
* Originally from http://davidwalsh.name/convert-xml-json
* This is a version that provides a JSON object without the attributes and places textNodes as values
* rather than an object with the textNode in it.
* 27/11/2012
* Ben Chidgey
*/
function xmlToJson(xml) {
    //Objectives
        //Convert XML into JSON
    
    // Create the return object
    var obj = {};

    // text node
    if (4 === xml.nodeType) {
        obj = xml.nodeValue;
    }

    if (xml.hasChildNodes()) {
        for (var i = 0; i < xml.childNodes.length; i++) {
            var TEXT_NODE_TYPE_NAME = '#text',
                item = xml.childNodes.item(i),
                nodeName = item.nodeName,
                content;

            if (TEXT_NODE_TYPE_NAME === nodeName) {
                //single textNode or next sibling has a different name
                if ((null === xml.nextSibling) || (xml.localName !== xml.nextSibling.localName)) {
                    content = xml.textContent;

                //we have a sibling with the same name
                } else if (xml.localName === xml.nextSibling.localName) {
                    //if it is the first node of its parents childNodes, send it back as an array
                    content = (xml.parentElement.childNodes[0] === xml) ? [xml.textContent] : xml.textContent;
                }
                return content;
            } else {
                if ('undefined' === typeof(obj[nodeName])) {
                    obj[nodeName] = xmlToJson(item);
                } else {
                    if ('undefined' === typeof(obj[nodeName].length)) {
                        var old = obj[nodeName];
                        obj[nodeName] = [];
                        obj[nodeName].push(old);
                    }

                    obj[nodeName].push(xmlToJson(item));
                }
            }
        }
    }
    return obj;
}

function invite(survey) {
    //Objectives
        //Display the popup given the survey parameters

var html =  "<aside id='gc-im-popup' class='survey hidden-print' tabindex='0'>" +
      "<style scoped>" +
        // Default (extra extra small view and over)
        ".survey {z-index: 1000; position: relative; margin: 0 auto; margin: 0 15px;}" +
        "#survey-close {height: 42px; line-height: 42px;}" +
        
        // Media queries (for modern browsers and IE8 - via respond.js)
        "@media screen and (min-width: 480px) {" + // Extra small view and over
          ".survey {position: fixed; bottom: 4.9em; left: 0; right: 0; margin: 0 auto; padding: 15px;}" +
          ".survey .panel {box-shadow: 0 0 15px;}" +
          ".survey .panel:focus {outline: 1px dotted #fff;}" +
          "#survey-close {top: 15px; right: 15px;}" +
        "}" +
        "@media screen and (min-width: 480px) and (max-width: 767px) {" + // Small view only
          ".survey {margin: 0 15px;}" +
          "#survey-close {right: 30px;}" +
        "}" +
        "@media screen and (min-width: 768px) {" + // Medium view and over
          ".survey {width: 720px;}" +
        "}" +
        "@media screen and (min-width: 992px) {" +
          ".survey {width: 470px; left: 470px; bottom: 4.2em;}" + // Large view and over
        "}" +
        "@media screen and (min-width: 1200px) {" + // Extra large view and over
         ".survey {width: 570px; left: 570px;}" +
        "}" +
        
        // View class fallbacks (needed for IE9-11 - they seem to ignore JS-injected media queries unless the user manually resizes their browser window)
        "html:not(.xxsmallview) .survey {position: fixed; bottom: 4.9em; left: 0; right: 0; margin: 0 auto; padding: 15px;}" +
        "html:not(.xxsmallview) .survey .panel {box-shadow: 0 0 15px;}" +
        "html:not(.xxsmallview) .survey .panel:focus {outline: 1px dotted #fff;}" +
        "html:not(.xxsmallview) #survey-close {top: 15px; right: 15px;}" +
        "html.xsmallview .survey {margin: 0 15px;}" +
        "html.smallview .survey {width: 720px;}" +
        "html.smallview #survey-close {right: 30px;}" +
        "html.mediumview .survey {width: 470px; left: 470px; bottom: 4.2em;}" +
        "html.largeview .survey, html.xlargeview .survey {width: 570px; left: 570px; bottom: 4.2em;}" +
      "</style>" +
      "<div class='panel panel-primary mrgn-bttm-0'>" +
        "<header id='close-im' class='panel-heading'>" +
          "<h2 class='panel-title'>" + survey["title-" + wb.lang] + "</h2>" + 
        "</header>" +
        "<div class='panel-body'>" +
        survey["body-" + wb.lang] +
          /*"<p>" + survey.paragraph1 + "</p>" +
          "<p class='mrgn-bttm-0'>" + survey.paragraph2 + "</p>" +*/
          "<ul class='list-inline mrgn-bttm-0'>" +
            "<li class='mrgn-tp-md'><a id='survey-yes' class='btn btn-primary' href='" + survey["link-" + wb.lang] + "' target='_blank'>" + survey["yes-" + wb.lang] + "</a></li>" +
            "<li class='mrgn-tp-md'><button id='survey-no' class='btn btn-default survey-close'>" + survey["no-" + wb.lang] + "</button></li>" +
          "</ul>" +
        "</div>" +
        "<button id='survey-close' class='mfp-close' title=" + '"' + survey["close-" + wb.lang] + '"' + ">×<span class='wb-inv'> " + survey["close-" + wb.lang] + "</span></button>" +
       "<input type='hidden' name='popupName' value='" + survey["uniqueTitle"] + "'>" +
  "</div>" +
    "</aside>",
$html = $( html ),
$userFocus = false,
overlayIsClosing,
cookieValue,
focusFlag;

// Close the overlay if any of its links/buttons get clicked or if the escape key gets pressed.
$html.on( "click vclick mouseup keydown", function( e ) {

  // Proceed if any of the overlay's links or buttons get clicked (including middle mouse clicks) or if the escape key gets pressed within the overlay.
  if (
      ( ( e.type === "click" || e.type === "vclick" ) && e.which === 1 && $( e.target ).closest( "a, button", this ).length ) // Clicked/Tapped a link/button.
      ||
      ( e.type === "mouseup" && e.which === 2 && $( e.target ).closest( "a", this ).length ) // Middle-clicked a link.
      ||
      ( ( e.type === "keydown" ) && ( e.which === 27 ) ) // Pressed escape key.
    ) {
    
      // add to remove added attributes to overlay when closing
      $("#first-focus").remove();
    
      // Set a flag to indicate the overlay is closing.
      // Needed to prevent IE11 (possibly also IE8-10/Edge) from failing to return user focus when closing the overlay (due to a separate focusin event triggering too quickly and clearing the user focus variable before it's needed).
      overlayIsClosing = 1;
      
      // Hide the overlay immediately.
      $( this ).hide();
      
      // Remove the overlay shortly afterwards.
      // This is being done to prevent problems when the yes link is middle-clicked. If the overlay were to be immediately removed, middle-clicking the yes link would remove the overlay without opening the link in a new tab/window. To avoid that issue, the overlay is now getting immediately hidden, then removed a short time later.
      setTimeout( function() { $html.empty() }, 1000 );
      
      // Determine the cookie's new value, depending on the ID of which link/button was clicked. Don't set the cookie's value to yes/no if the Esc key was pressed.
      if ( $( e.target ).closest( "#survey-yes", this ).length && ! ( ( e.type === "keydown" ) && ( e.which === 27 ) ) ) {
        cookieValue = "yes";
      }
      else if ( $( e.target ).closest( "#survey-no", this ).length && ! ( ( e.type === "keydown" ) && ( e.which === 27 ) ) ) {
        cookieValue = "no";
      }
      else {
        cookieValue = "closed";
      }
      
      // Return the user's focus to where they were before the overlay stole it, then delete the user focus variable.
      // Otherwise, return the user's focus to the H1 element (or if it doesn't exist - the next element, which is likely to be main). Needed to prevent browsers from unexpectedly returning focus to the top of the page.
      /*if ( $userFocus ) {
        $userFocus.trigger( "setfocus.wb" );
        $userFocus = null;
      }
      else {*/
      
        // Does the H1 exist? If yes, focus to it.
        // Otherwise, focus to whatever element comes after the overlay (likely main).
        /*if ( $( "h1" ).length ) {
          $( "h1" ).trigger( "setfocus.wb" );
        }
        else {
          $html.next().trigger( "setfocus.wb" );
        }
      }*/
    
      // focus on the beginning of the document
    $("#wb-tphp").trigger("setfocus.wb");
      
      // Set cookie.
     // _satellite.gcCustom.storage.set( dtmSettings.storageNames.persistent, cookieValue, surveyDB.settings.persistent_cookie_duration );
     // localStorage.setItem('lastDateIMShown', now);
      // Remove this event handler.
      $( this ).off();
  

  }
  
 
		
} );

// If the user tabs out of the overlay after it was automatically focused on, return their initial focus.
/*$html.find( ".panel" ).on( "keydown", function( e ) {
  
  // Proceed if tabbing backwards from the panel container/yes link or if tabbing forward from the close button.
  if ( ( ( ( $( e.target ).hasClass( "panel" ) || e.target.id === "survey-yes" ) && e.shiftKey) || e.target.id === "survey-close" ) && e.which === 9 && $userFocus ) {
      
      // Don't focus to whatever comes directly before or after the overlay in the flow of content.
      e.preventDefault();
      
      // Return the user's focus to where they were before the overlay stole it, then delete the user focus variable.
      $userFocus.trigger( "setfocus.wb" );
      $userFocus = null;
      
      // Remove this event handler.
      $( this ).off( "keydown" );
    }
} );
*/
  
// Insert the overlay directly before the <main> element.
$( "main" ).before( $html );
  // Since jQuery fix will sanitize the target attribute, here is a quick solution to add it back right after the IM html is inserted
  $("#survey-yes").attr("target", "_blank");
 // Inset the "Skip to Invitation Manager Popup" link before the <main> element.
		if (wb.lang === "fr")
		{
			$( "#wb-tphp" ).prepend("<li id='first-focus' class='wb-slc'>" +
			"<a  class='wb-sl' href='#gc-im-popup'>Passer au Gestionnaire des Invitations</a></li> ");
		}
		else {
			$( "#wb-tphp" ).prepend("<li id='first-focus' class='wb-slc'>" +
			"<a   class='wb-sl' href='#gc-im-popup'>Skip to Invitation Manager Popup</a></li> ");
		}
  
  

//pop-up impression for analytics
   
    //If the pop-up appears  
    if($('aside.survey.hidden-print').length){
                var popUpName = $("input[name='popupName']").val();
                   
   _satellite.setVar('jsPopupName', popUpName);
 //direct call rule
 _satellite.track('popUpImpression');
          
               }
    
    //End pop-up impression code

// Find where the user is currently focused.
/*$userFocus = $( document.activeElement );*/

// Automatically focus on the overlay.
//$html.find( ".panel" ).trigger( "setfocus.wb" );


// After the overlay steals focus, clear the user focus variable if the user goes outside of of it.
// It's possible to go outside of the overlay without closing or tabbing out of it (e.g. by clicking or touching outside of it or using a screen reader to navigate by links). In that scenario, the user focus variable needs to be cleared to prevent strange focusing if the user enters the overlay again afterwards and focuses out of/closes it.
/*$( "body" ).on( "focusin mousedown", function ( e ) {*/

  // When the survey overlay first gains focus, set the focus flag variable to 1. Sometimes the overlay isn't the first thing that gains focus.
  // After the overlay has initially gained focus, once something outside of it gets focused on, clear the user focus variable. If the overlay is losing focus because it's being closed, don't do anything or else IE11 (possibly also IE8-10/Edge) will run this event handler too early and prevent the close event from returning user's focus to the right spot.
 /* if ( $( e.target ).closest( ".survey", this ).length ) {
    
    if ( ! focusFlag ) {
      focusFlag = 1;
    }
  }
  else {
  
    if ( ! overlayIsClosing && $userFocus ) {
      $userFocus = null;
    }
  }
} );*/
}

function getObjArr(o){
    //Objectives
        //Always return an object array containing the given parameter. This allows us to loop through the object array whether there are 0, 1 or more objects in the array
    return (typeof o === "undefined") ? [] : Array.isArray(o) ? o : [o];
}

function clog(a) {
    //Objectives
        //log console data if debug mode is enabled
    if (debugMode) 
        console.log("Invitation Mgr: " + a);
    }
}



</script><script>_satellite["_runScript1"](function(event, target, Promise) {
_satellite.track('pageReset');
});</script></body></html>